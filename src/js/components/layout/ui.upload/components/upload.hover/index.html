<div class="m-upload">
    <div class="m-files-zone">
        <div class="m-entry" r-hide={fileList.length === 0}>
            {#if fileList[0] && fileList[0].type === 'IMAGE'}
                <div class="m-img-wrapper">
                    <img class="u-img" src={src}/>
                </div>
            {#elseif fileList[0] && fileList[0].type === 'ZIP'}
                <span class="u-txt">ZIP</span>
            {#elseif fileList[0] && fileList[0].type === 'UNKNOWN'}
                <span class="u-txt">未知</span>
            {#else} <!-- TEXT, DOC, JS, HTML -->
                <span class="u-txt">{fileList[0] && fileList[0].type}</span>
            {/if}
        </div>
        <ul ref="fileswrapper" class="m-filelist" r-style={{width: fileUnitWidth * numPerline + fileUnitMargin * (numPerline - 1) + 'px'}}></ul>
        <div ref="inputwrapper" class="u-input-wrapper" on-click={this.fileDialogOpen()}>
            {#if this.$body}
            {#inc this.$body}
            {#else}
            <div class="u-input-btn"><span class="u-input-content"><i class="u-icon u-icon-plus"></i>上传文件</span></div>
            {/if}
        </div>
    </div>
    <form method="POST" action={url} target="iframe{_id}" enctype={contentType} ref="form">
        <input type="file" name={name} ref="file" multiple={multiple ? 'multiple' : ''} r-hide={true} on-change={this.fileSelect()}>
        {#list Object.keys(data) as key}
            <input type="hidden" name={key} value={data[key]}>
        {/list}
    </form>
    <div ref="imagepreview"></div>
</div>
